syntax = "proto3";

import "book.proto";
import "imdb.proto";
import "anime.proto";


enum Type {
    BOOK = 0;
    SHOW = 1;
    ANIME = 2;
	ALL = 3;
}

////////////////////////////////////////////
///////////////BASIC RESPONSES//////////////
////////////////////////////////////////////

message BasicInfoResponse {
	repeated BookBasicInfo book_recommendations = 1;
	repeated IMDBBasicInfo imdb_recommendations = 2;
	repeated AnimeBasicInfo anime_recommendations = 3;
}

message BookBasicInfo {
    int64 book_id = 1;
	string book_name = 2;
}

message IMDBBasicInfo {
    int64 imdb_id = 1;
	string imdb_name = 2;
}

message AnimeBasicInfo {
    int64 anime_id = 1;
	string anime_name = 2;
}

////////////////////////////////////////////
////////////////////////////////////////////
////////////////////////////////////////////

////////////////////////////////////////////
////////////////BASIC REQUESTS//////////////
////////////////////////////////////////////

message RecommendationRequest {
    int64 user_id = 1;
    int32 max_results = 2;
	Type types = 3;
}

message SearchByNameRequest {
	string name = 1;
    int32 max_results = 2;
	Type types = 3;
}

message SearchByCategoryRequest {
	string category = 1;
    int32 max_results = 2;
	Type types = 3;
}

////////////////////////////////////////////
////////////////////////////////////////////
////////////////////////////////////////////

service Library {
    rpc Recommend (RecommendationRequest) returns (BasicInfoResponse);
	rpc GetBook (BookByIdRequest) returns (BookData);
	rpc GetIMDB (IMDBByIdRequest) returns (IMDBData);
	rpc GetAnime (AnimeByIdRequest) returns (AnimeData);
	rpc SearchByName (SearchByNameRequest) returns (BasicInfoResponse);
	rpc SearchByCategory (SearchByCategoryRequest) returns (BasicInfoResponse);
}